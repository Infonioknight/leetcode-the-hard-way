"use strict";(self.webpackChunkleetcode_the_hard_way=self.webpackChunkleetcode_the_hard_way||[]).push([[20748],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=i.createContext({}),s=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=s(n),u=a,d=c["".concat(p,".").concat(u)]||c[u]||h[u]||r;return n?i.createElement(d,o(o({ref:t},m),{},{components:n})):i.createElement(d,o({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},58078:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var i=n(87462),a=(n(67294),n(3905));const r={description:"Author: @heiheihang | https://leetcode.com/problems/minimum-time-to-finish-the-race/"},o="2188 - Minimum Time to Finish the Race (Hard)",l={unversionedId:"2100-2199/minimum-time-to-finish-the-race-hard",id:"2100-2199/minimum-time-to-finish-the-race-hard",title:"2188 - Minimum Time to Finish the Race (Hard)",description:"Author: @heiheihang | https://leetcode.com/problems/minimum-time-to-finish-the-race/",source:"@site/solutions/2100-2199/2188-minimum-time-to-finish-the-race-hard.md",sourceDirName:"2100-2199",slug:"/2100-2199/minimum-time-to-finish-the-race-hard",permalink:"/solutions/2100-2199/minimum-time-to-finish-the-race-hard",draft:!1,editUrl:"https://github.com/wingkwong/leetcode-the-hard-way/tree/main/solutions/2100-2199/2188-minimum-time-to-finish-the-race-hard.md",tags:[],version:"current",sidebarPosition:2188,frontMatter:{description:"Author: @heiheihang | https://leetcode.com/problems/minimum-time-to-finish-the-race/"},sidebar:"tutorialSidebar",previous:{title:"2187 - Minimum Time to Complete Trips (Medium)",permalink:"/solutions/2100-2199/minimum-time-to-complete-trips-medium"},next:{title:"2190 - Most Frequent Number Following Key In an Array (Easy)",permalink:"/solutions/2100-2199/most-frequent-number-following-key-in-an-array-easy"}},p={},s=[{value:"Problem Link",id:"problem-link",level:2},{value:"Problem Statement",id:"problem-statement",level:2},{value:"Approach 1: DP",id:"approach-1-dp",level:2}],m=(c="SolutionAuthor",function(e){return console.warn("Component "+c+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",e)});var c;const h={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"2188---minimum-time-to-finish-the-race-hard"},"2188 - Minimum Time to Finish the Race (Hard)"),(0,a.kt)("h2",{id:"problem-link"},"Problem Link"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://leetcode.com/problems/minimum-time-to-finish-the-race/"},"https://leetcode.com/problems/minimum-time-to-finish-the-race/")),(0,a.kt)("h2",{id:"problem-statement"},"Problem Statement"),(0,a.kt)("p",null,"You are given a ",(0,a.kt)("strong",{parentName:"p"},"0-indexed")," 2D integer array ",(0,a.kt)("inlineCode",{parentName:"p"},"tires")," where ",(0,a.kt)("inlineCode",{parentName:"p"},"tires[i] = [fi, ri]")," indicates that the ",(0,a.kt)("inlineCode",{parentName:"p"},"ith")," tire can finish its ",(0,a.kt)("inlineCode",{parentName:"p"},"xth")," successive lap in ",(0,a.kt)("inlineCode",{parentName:"p"},"fi * ri(x-1)")," seconds."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For example, if ",(0,a.kt)("inlineCode",{parentName:"li"},"fi = 3")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"ri = 2"),", then the tire would finish its ",(0,a.kt)("inlineCode",{parentName:"li"},"1st")," lap in ",(0,a.kt)("inlineCode",{parentName:"li"},"3")," seconds, its ",(0,a.kt)("inlineCode",{parentName:"li"},"2nd")," lap in ",(0,a.kt)("inlineCode",{parentName:"li"},"3 * 2 = 6")," seconds, its ",(0,a.kt)("inlineCode",{parentName:"li"},"3rd")," lap in ",(0,a.kt)("inlineCode",{parentName:"li"},"3 * 22 = 12")," seconds, etc.")),(0,a.kt)("p",null,"You are also given an integer ",(0,a.kt)("inlineCode",{parentName:"p"},"changeTime")," and an integer ",(0,a.kt)("inlineCode",{parentName:"p"},"numLaps"),"."),(0,a.kt)("p",null,"The race consists of ",(0,a.kt)("inlineCode",{parentName:"p"},"numLaps")," laps and you may start the race with ",(0,a.kt)("strong",{parentName:"p"},"any")," tire. You have an ",(0,a.kt)("strong",{parentName:"p"},"unlimited")," supply of each tire and after every lap, you may ",(0,a.kt)("strong",{parentName:"p"},"change")," to any given tire (including the current tire type) if you wait ",(0,a.kt)("inlineCode",{parentName:"p"},"changeTime")," seconds."),(0,a.kt)("p",null,"Return ",(0,a.kt)("em",{parentName:"p"},"the ",(0,a.kt)("strong",{parentName:"em"},"minimum")," time to finish the race.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example 1:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Input: tires = [[2,3],[3,4]], changeTime = 5, numLaps = 4\nOutput: 21\nExplanation: \nLap 1: Start with tire 0 and finish the lap in 2 seconds.\nLap 2: Continue with tire 0 and finish the lap in 2 * 3 = 6 seconds.\nLap 3: Change tires to a new tire 0 for 5 seconds and then finish the lap in another 2 seconds.\nLap 4: Continue with tire 0 and finish the lap in 2 * 3 = 6 seconds.\nTotal time = 2 + 6 + 5 + 2 + 6 = 21 seconds.\nThe minimum time to complete the race is 21 seconds.\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example 2:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Input: tires = [[1,10],[2,2],[3,4]], changeTime = 6, numLaps = 5\nOutput: 25\nExplanation: \nLap 1: Start with tire 1 and finish the lap in 2 seconds.\nLap 2: Continue with tire 1 and finish the lap in 2 * 2 = 4 seconds.\nLap 3: Change tires to a new tire 1 for 6 seconds and then finish the lap in another 2 seconds.\nLap 4: Continue with tire 1 and finish the lap in 2 * 2 = 4 seconds.\nLap 5: Change tires to tire 0 for 6 seconds then finish the lap in another 1 second.\nTotal time = 2 + 4 + 6 + 2 + 4 + 6 + 1 = 25 seconds.\nThe minimum time to complete the race is 25 seconds. \n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Constraints:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"1 <= tires.length <= 10^5")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tires[i].length == 2")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"1 <= fi, changeTime <= 10^5")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"2 <= ri <= 10^5")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"1 <= numLaps <= 1000"))),(0,a.kt)("h2",{id:"approach-1-dp"},"Approach 1: DP"),(0,a.kt)("p",null,"The general approach is to store the minimum time required to travel each lap. We must make the following observation:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"To travel $$n$$ laps, we must use the same tire for $$n$$ laps, or we can use the set of tires used to travel $$a$$ laps and another set of tires used to travel $$b$$ laps such that $$a+b=n$$."),(0,a.kt)("li",{parentName:"ul"},"Before we can find an optimal set of tires to travel $$n$$ laps, we can only consider using the same tire to travel $$1$$ to $$n$$ laps")),(0,a.kt)("p",null,"We can now break this problem into 2 parts:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Find the shortest time to travel $$n$$ laps when we can only use 1 tire at a time"),(0,a.kt)("li",{parentName:"ol"},"Find the shortest time to travel $$n$$ laps by potentially choosing the time needed to travel $$a$$ laps and the time needed to travel $$b$$ laps such that we can travel $$n$$ laps with $$time(a)+time(b)+changeTime$$")),(0,a.kt)("p",null,"The first part is straightforward as we only need to iterate each tire for $$numLaps$$ times. However, we need some optimizations to stop iterating when the following condition is met"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"f_i * (r_i) ^ n >= time[(n+1)//2] + time[(n+1)//2] + changeTime\n")),(0,a.kt)("p",null,"Notice that the above condition is not optimally the upper bound, but it is good enough to break the loop. We know that we can stop here because using the same tire increases exponentially, and further combining previous sets of tires increases linearly."),(0,a.kt)("p",null,"The second part involves looking for a combination of laps for each lap. For example, if we want to find the minimum time for running 9 laps, we need to find the following"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dp[1] + dp[8] + changeTime")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dp[2] + dp[7] + changeTime")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dp[3] + dp[6] + changeTime")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dp[4] + dp[5] + changeTime"))),(0,a.kt)("p",null,"Of course, if there exists a tire running 9 laps in a row that is fast than the above, we keep it."),(0,a.kt)("p",null,"A small optimisation here is that instead of generating repeating pairs (","[","1,8] and ","[","8,1]), we can cut each loop by half."),(0,a.kt)("p",null,"Here is a dry run of the following test case:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"tires = [2,3], [3,3], [3, 2], changeTime = 5, numLaps = 6\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168303953-913d229c-ce49-4480-8810-a7b397856140.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168303969-2225c532-7582-4940-ab0f-5a76a3662e60.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168303988-5ec8284a-8690-4702-a363-a14a2f963cd9.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168304003-39cee495-675e-4b33-b813-4fd1ee280ea8.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168304019-dfb9f067-4556-44e8-9c2e-c19e42f8415c.png",alt:"image"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/35857179/168304028-cf195b2c-3e05-4736-b950-a0c5851fcc20.png",alt:"image"})),(0,a.kt)(m,{name:"@heiheihang",mdxType:"SolutionAuthor"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def minimumFinishTime(self, tires: List[List[int]], changeTime: int, numLaps: int) -> int:\n\n    # initialize DP Array\n    # it keeps track of the shortest time needed to finish each lap\n    dp = [float('inf')] * (numLaps + 1)\n\n    # initialize the shortest time needed to finish each lap with 1 tire only\n    for f, r in tires:\n\n        # initialize the finishing time\n        time = f\n\n        # initialize the number of laps\n        cnt = 1\n\n        # hard upper limit is numLaps\n        while(cnt <= numLaps):\n\n            # a terminating condition if continually running the same lap is slower\n            if(dp[(cnt + 1) // 2] * 2 + changeTime <= time):\n                dp[cnt] = min(dp[(cnt + 1) // 2] * 2 + changeTime, dp[cnt])\n                break\n            else:\n                # update the shortest time needed to finish cnt laps\n                dp[cnt] = min(dp[cnt], time)\n\n            # update finishing time and number of laps\n            time += f * (r ** (cnt))\n            cnt += 1\n\n    # check for all small + big = i\n    for i in range(2, numLaps+1):\n        for j in range(1, i // 2 + 1):\n\n            small = j\n            big = i - j\n\n            # remember to add changeTime if we combine two previous sets of tires\n            dp[i] = min(dp[i], dp[small] + dp[big] + changeTime)\n\n    return dp[-1]\n\n")))}d.isMDXComponent=!0}}]);
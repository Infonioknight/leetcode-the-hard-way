"use strict";(self.webpackChunkleetcode_the_hard_way=self.webpackChunkleetcode_the_hard_way||[]).push([[68099],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>y});var n=o(67294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(o),m=r,y=c["".concat(s,".").concat(m)]||c[m]||u[m]||a;return o?n.createElement(y,l(l({ref:t},d),{},{components:o})):n.createElement(y,l({ref:t},d))}));function y(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,l=new Array(a);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=o[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},13334:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>b,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=o(87462),r=(o(67294),o(3905));const a={description:"Author: @ColeB2 | https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/",tags:["Array","Dynamic Programming"]},l="0309 - Best Time to Buy and Sell Stock with Cooldown (Medium)",i={unversionedId:"0300-0399/best-time-to-buy-and-sell-stock-with-cooldown-medium",id:"0300-0399/best-time-to-buy-and-sell-stock-with-cooldown-medium",title:"0309 - Best Time to Buy and Sell Stock with Cooldown (Medium)",description:"Author: @ColeB2 | https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/",source:"@site/solutions/0300-0399/0309-best-time-to-buy-and-sell-stock-with-cooldown-medium.md",sourceDirName:"0300-0399",slug:"/0300-0399/best-time-to-buy-and-sell-stock-with-cooldown-medium",permalink:"/solutions/0300-0399/best-time-to-buy-and-sell-stock-with-cooldown-medium",draft:!1,editUrl:"https://github.com/wingkwong/leetcode-the-hard-way/tree/main/solutions/0300-0399/0309-best-time-to-buy-and-sell-stock-with-cooldown-medium.md",tags:[{label:"Array",permalink:"/solutions/tags/array"},{label:"Dynamic Programming",permalink:"/solutions/tags/dynamic-programming"}],version:"current",sidebarPosition:309,frontMatter:{description:"Author: @ColeB2 | https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/",tags:["Array","Dynamic Programming"]},sidebar:"tutorialSidebar",previous:{title:"0307 - Range Sum Query - Mutable (Medium)",permalink:"/solutions/0300-0399/range-sum-query-mutable-medium"},next:{title:"0312 - Burst Balloons (Hard)",permalink:"/solutions/0300-0399/burst-balloons-hard"}},s={},p=[{value:"Problem Link",id:"problem-link",level:2},{value:"Problem Statement",id:"problem-statement",level:2},{value:"Approach 1: Dynamic Programming",id:"approach-1-dynamic-programming",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},c=d("Tabs"),u=d("TabItem"),m=d("SolutionAuthor"),y={toc:p},h="wrapper";function b(e){let{components:t,...o}=e;return(0,r.kt)(h,(0,n.Z)({},y,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"0309---best-time-to-buy-and-sell-stock-with-cooldown-medium"},"0309 - Best Time to Buy and Sell Stock with Cooldown (Medium)"),(0,r.kt)("h2",{id:"problem-link"},"Problem Link"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/"},"https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/")),(0,r.kt)("h2",{id:"problem-statement"},"Problem Statement"),(0,r.kt)("p",null,"You are given an array ",(0,r.kt)("inlineCode",{parentName:"p"},"prices")," where ",(0,r.kt)("inlineCode",{parentName:"p"},"prices[i]")," is the price of a given stock on the ",(0,r.kt)("inlineCode",{parentName:"p"},"ith")," day."),(0,r.kt)("p",null,"Find the maximum profit you can achieve. You may complete as many transactions as you like (i.e., buy one and sell one share of the stock multiple times) with the following restrictions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"After you sell your stock, you cannot buy stock on the next day (i.e., cooldown one day).")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example 1:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Input: prices = [1,2,3,0,2]\nOutput: 3\nExplanation: transactions = [buy, sell, cooldown, buy, sell]\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example 2:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Input: prices = [1]\nOutput: 0\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Constraints:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"1 <= prices.length <= 5000")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"0 <= prices[i] <= 1000"))),(0,r.kt)("h2",{id:"approach-1-dynamic-programming"},"Approach 1: Dynamic Programming"),(0,r.kt)("p",null,"A tricky question, which requires us to track 3 states. "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"We are ready to buy stock, no need to wait for a cool down."),(0,r.kt)("li",{parentName:"ol"},"We are ready to sell stock,"),(0,r.kt)("li",{parentName:"ol"},"We sold stock, and now need to cool down.")),(0,r.kt)("p",null,"We can track these with 3 dp arrays, $$dp_buy$$, $$dp_sell$$, $$dp_cool$$."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"$$dp","_","buy$$ will represent the max profit if we buy today, and can be updated by subtracting the price of stock today from $$dp_cool$$."),(0,r.kt)("li",{parentName:"ol"},"$$dp","_","sell$$ will represent the max profit we could have if we sold today, and can be updated by subtracting the price of today's stock from the max profit from previous buy days, which will be a variable we can track."),(0,r.kt)("li",{parentName:"ol"},"$$dp","_","cool$$ will represent the maximum profit we could have if we did nothing today, which will just be updated based on the max profit from all the dp arrays from the day before.")),(0,r.kt)("p",null,"By iterating through all the prices from $$1$$ to $$n$$ and updating our dp arrays, we can find the max profit in linear time."),(0,r.kt)("p",null,"Time Complexity: $$O(n)$$, where n is the length of prices. We must iterate through the list and perform constant time operations on each iteration."),(0,r.kt)("p",null,"Space Complexity: $$O(n)$$, where n is the length of prices. We maintain 3 separate dynamic programming arrays."),(0,r.kt)(c,{mdxType:"Tabs"},(0,r.kt)(u,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)(m,{name:"@ColeB2",mdxType:"SolutionAuthor"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"class Solution:\n    def maxProfit(self, prices: List[int]) -> int:\n        # initialize our variables, n length of prices, and our 3\n        # dynamic programming arrays.\n        n = len(prices)\n        # dp_buy represents the max profit on ith day if we bought stock.\n        dp_buy = [0] * n\n        # dp_sell reps. the max profit on the ith day if we sold stock.\n        dp_sell = [0] * n\n        # dp_cool reps. the max profit on the ith day if we do nothing.\n        dp_cool = [0] * n\n        # initialize dp_buy as if we bought first stock.\n        dp_buy[0] = - prices[0]\n        #dp_sell, first stock can't be sold, so we initialize -inf.\n        dp_sell[0] = float('-inf')\n        # Max profit from our buy array so far. Used for calculating our\n        # max sell profit.\n        max_prev_buy = dp_buy[0]\n        # iterate all prices from 1 - n as we already handles 0th day.\n        for i in range(1, n):\n            # only buy after cool down, update based on max profit from\n            # cooldown yesterday and price of today's stock.\n            dp_buy[i] = dp_cool[i - 1] - prices[i]\n            # we calculate dp_sell of today base on the max profit from\n            # any previous buy day which we store instead of constantly\n            # getting max price from dp_buy[:i].\n            dp_sell[i] = max_prev_buy + prices[i]\n            # do nothing, so we can update date dp_cool based of the\n            # of any of the dp days yesterday values.\n            dp_cool[i] = max(dp_cool[i - 1], dp_buy[i - 1], dp_sell[i - 1])\n            # update our max_prev_buy with today's value.\n            max_prev_buy = max(max_prev_buy, dp_buy[i])\n        # return max profit, since the buy will always finish with us\n        # buying stock on last day, no need to involve it as it will\n        # always be less than the last day of dp_sell and dp_cool.\n        return max(dp_sell[-1], dp_cool[-1])\n")))))}b.isMDXComponent=!0}}]);